<%- include("./layouts/header.ejs") %>

<section class="categories section-card">
  <div class="title">
    <div class="color-box"></div>
    <p class="title-name">Add New Product</p>
  </div>
  <form
    class="add-product"
    action="/admin/addproduct"
    method="post"
    enctype="multipart/form-data"
  >
    <div class="add-feild-container">
      <label>Product Name</label>
      <input type="text" name="name" />
    </div>
    <div class="add-feild-container">
      <label>category</label>
      <select class="single" name="category" id="category">
        <option value="MOBILE">Mobile</option>
        <option value="LAPTOP">Laptop</option>
        <option value="WATCH">Watches</option>
        <option value="HEADPHONE">Headphones</option>
        <option value="CAMERA">Cameras</option>
        <option value="GAMING">Gaming</option>
      </select>
    </div>
    <div class="add-feild-container">
      <label>Brand</label>
      <input type="text" name="brand" />
    </div>
    <div class="add-feild-container">
      <label>Price</label>
      <input type="number" name="price" />
    </div>
    <div class="add-feild-container">
      <label>Offer</label>
      <input type="number" name="offer" />
    </div>
    <div class="add-feild-container">
      <label>Stock</label>
      <input type="number" name="stock" />
    </div>
    <div class="add-feild-container">
      <label>Rating</label>
      <input type="number" name="rating" step="0.1"/>
    </div>
    <div class="add-feild-container">
      <label>Description</label>
      <textarea name="detail"></textarea>
    </div>
    
    <div class="add-feild-container">
      <label>Colors</label>
      <div>
        <label><input type="checkbox" name="colors" value="red" /> Red</label>
        <label
          ><input type="checkbox" name="colors" value="white" /> White</label
        >
        <label
          ><input type="checkbox" name="colors" value="black" /> Black</label
        >
      </div>
        <label
          ><input type="checkbox" name="colors" value="grey" /> Grey</label
        >
      </div>
    </div>

    <div class="add-feild-container">
      <label>images</label>
      <input
        type="file"
        id="image-input"
        name="images"
        multiple
        accept="image/*"
      />
    </div>
    <div class="image-preview" id="image-preview"></div>

    <button class="btn save-btn" type="submit">Add Product</button>
  </form>
</section>

<script>
  document
    .getElementById("image-input")
    .addEventListener("change", function (event) {
      const files = event.target.files;
      const previewContainer = document.getElementById("image-preview");
      previewContainer.innerHTML = "";
      if (files.length > 0) {
        Array.from(files).forEach((file) => {
          const reader = new FileReader();
          reader.onload = function (e) {
            const img = document.createElement("img");
            img.src = e.target.result;
            previewContainer.appendChild(img);
          };
          reader.readAsDataURL(file);
        });
      } else {
        previewContainer.innerHTML = "<p>No images selected.</p>";
      }
    });
</script>

<%- include("./layouts/footer.ejs") %>
